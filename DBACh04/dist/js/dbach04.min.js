/*! dbach04 02-07-2016 */
var app=app||{},TodoList=Backbone.Collection.extend({model:app.Todo,localStorage:new Backbone.LocalStorage("todos-backbone"),completed:function(){return this.filter(function(a){return a.get("completed")})},remaining:function(){return this.without.apply(this,this.completed())},nextOrder:function(){return this.length?this.last().get("order")+1:1},comparator:function(a){return a.get("order")}});app.Todos=new TodoList;var app=app||{};app.Todo=Backbone.Model.extend({defaults:{title:"",completed:!1},toggle:function(){this.save({completed:!this.get("completed")})}});var app=app||{};app.AppView=Backbone.View.extend({el:"#todoapp",statsTemplate:_.template($("#stats-template").html()),initialize:function(){this.allCheckbox=this.$("#toggle-all")[0],this.$input=this.$("#new-todo"),this.$footer=this.$("#footer"),this.$main=this.$("#main"),this.listenTo(app.Todos,"add",this.addOne),this.listenTo(app.Todos,"reset",this.addAll)},addOne:function(a){var b=new app.TodoView({model:a});$("#todo-list").append(b.render().el)},addAll:function(){this.$("#todo-list").html(""),app.Todos.each(this.addOne,this)}});