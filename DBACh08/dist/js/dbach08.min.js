/*! dbach08 05-07-2016 */
!function(a){"use strict";if("todomvc.com"===location.hostname){!function(a,b){var c=a.createElement(b),d=a.getElementsByTagName(b)[0];c.src="//www.google-analytics.com/ga.js",d.parentNode.insertBefore(c,d)}(document,"script")}}(window);var app=app||{};app.Library=Backbone.Collection.extend({model:app.Book,url:"/api/books"}),define(["backbone","models/stockitem"],function(a,b){var c=a.Collection.extend({model:b,initialize:function(){this.on("add",this.updateSet,this)},updateSet:function(){items=this.models}});return c});var app=app||{},TodoList=Backbone.Collection.extend({model:app.Todo,localStorage:new Backbone.LocalStorage("todos-backbone"),completed:function(){return console.log("collections/todos.js - inside TodoList completed()"),this.filter(function(a){return a.get("completed")})},remaining:function(){return console.log("collections/todos.js - inside TodoList remaining()"),this.without.apply(this,this.completed())},nextOrder:function(){return console.log("collections/todos.js - inside TodoList nextOrder()"),this.length?this.last().get("order")+1:1},comparator:function(a){return console.log("collections/todos.js - inside TodoList comparator()"),a.get("order")}});app.Todos=new TodoList,function(a,b){function c(){var a=p.elements;return"string"==typeof a?a.split(" "):a}function d(a){var b=o[a[m]];return b||(b={},n++,a[m]=n,o[n]=b),b}function e(a,c,e){return c||(c=b),i?c.createElement(a):(e||(e=d(c)),c=e.cache[a]?e.cache[a].cloneNode():l.test(a)?(e.cache[a]=e.createElem(a)).cloneNode():e.createElem(a),c.canHaveChildren&&!k.test(a)?e.frag.appendChild(c):c)}function f(a,b){b.cache||(b.cache={},b.createElem=a.createElement,b.createFrag=a.createDocumentFragment,b.frag=b.createFrag()),a.createElement=function(c){return p.shivMethods?e(c,a,b):b.createElem(c)},a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+c().join().replace(/\w+/g,function(a){return b.createElem(a),b.frag.createElement(a),'c("'+a+'")'})+");return n}")(p,b.frag)}function g(a){a||(a=b);var c=d(a);if(p.shivCSS&&!h&&!c.hasCSS){var e,g=a;e=g.createElement("p"),g=g.getElementsByTagName("head")[0]||g.documentElement,e.innerHTML="x<style>article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}</style>",e=g.insertBefore(e.lastChild,g.firstChild),c.hasCSS=!!e}return i||f(a,c),a}var h,i,j=a.html5||{},k=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,l=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,m="_html5shiv",n=0,o={};!function(){try{var a=b.createElement("a");a.innerHTML="<xyz></xyz>",h="hidden"in a;var c;if(!(c=1==a.childNodes.length)){b.createElement("a");var d=b.createDocumentFragment();c="undefined"==typeof d.cloneNode||"undefined"==typeof d.createDocumentFragment||"undefined"==typeof d.createElement}i=c}catch(e){i=h=!0}}();var p={elements:j.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:!1!==j.shivCSS,supportsUnknownElements:i,shivMethods:!1!==j.shivMethods,type:"default",shivDocument:g,createElement:e,createDocumentFragment:function(a,e){if(a||(a=b),i)return a.createDocumentFragment();for(var e=e||d(a),f=e.frag.cloneNode(),g=0,h=c(),j=h.length;g<j;g++)f.createElement(h[g]);return f}};a.html5=p,g(b)}(this,document),function(a){"function"==typeof define?define(a):"function"==typeof YUI?YUI.add("es5",a):a()}(function(){function a(a){return a=+a,a!==a?a=0:0!==a&&a!==1/0&&a!==-(1/0)&&(a=(a>0||-1)*Math.floor(Math.abs(a))),a}function b(a){var b=typeof a;return null===a||"undefined"===b||"boolean"===b||"number"===b||"string"===b}function c(a){var c,d,e;if(b(a))return a;if(d=a.valueOf,"function"==typeof d&&(c=d.call(a),b(c)))return c;if(e=a.toString,"function"==typeof e&&(c=e.call(a),b(c)))return c;throw new TypeError}Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if("function"!=typeof b)throw new TypeError("Function.prototype.bind called on incompatible "+b);var c=l.call(arguments,1),d=function(){if(this instanceof d){var e=b.apply(this,c.concat(l.call(arguments)));return Object(e)===e?e:this}return b.apply(a,c.concat(l.call(arguments)))};return b.prototype&&(d.prototype=Object.create(b.prototype)),d});var d,e,f,g,h,i=Function.prototype.call,j=Array.prototype,k=Object.prototype,l=j.slice,m=i.bind(k.toString),n=i.bind(k.hasOwnProperty);if((h=n(k,"__defineGetter__"))&&(d=i.bind(k.__defineGetter__),e=i.bind(k.__defineSetter__),f=i.bind(k.__lookupGetter__),g=i.bind(k.__lookupSetter__)),2!=[1,2].splice(0).length){var o=Array.prototype.splice;Array.prototype.splice=function(a,b){return arguments.length?o.apply(this,[void 0===a?0:a,void 0===b?this.length-a:b].concat(l.call(arguments,2))):[]}}Array.isArray||(Array.isArray=function(a){return"[object Array]"==m(a)});var p=Object("a"),q="a"!=p[0]||!(0 in p);if(Array.prototype.forEach||(Array.prototype.forEach=function(a){var b=E(this),c=q&&"[object String]"==m(this)?this.split(""):b,d=arguments[1],e=-1,f=c.length>>>0;if("[object Function]"!=m(a))throw new TypeError;for(;++e<f;)e in c&&a.call(d,c[e],e,b)}),Array.prototype.map||(Array.prototype.map=function(a){var b=E(this),c=q&&"[object String]"==m(this)?this.split(""):b,d=c.length>>>0,e=Array(d),f=arguments[1];if("[object Function]"!=m(a))throw new TypeError(a+" is not a function");for(var g=0;g<d;g++)g in c&&(e[g]=a.call(f,c[g],g,b));return e}),Array.prototype.filter||(Array.prototype.filter=function(a){var b,c=E(this),d=q&&"[object String]"==m(this)?this.split(""):c,e=d.length>>>0,f=[],g=arguments[1];if("[object Function]"!=m(a))throw new TypeError(a+" is not a function");for(var h=0;h<e;h++)h in d&&(b=d[h],a.call(g,b,h,c)&&f.push(b));return f}),Array.prototype.every||(Array.prototype.every=function(a){var b=E(this),c=q&&"[object String]"==m(this)?this.split(""):b,d=c.length>>>0,e=arguments[1];if("[object Function]"!=m(a))throw new TypeError(a+" is not a function");for(var f=0;f<d;f++)if(f in c&&!a.call(e,c[f],f,b))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(a){var b=E(this),c=q&&"[object String]"==m(this)?this.split(""):b,d=c.length>>>0,e=arguments[1];if("[object Function]"!=m(a))throw new TypeError(a+" is not a function");for(var f=0;f<d;f++)if(f in c&&a.call(e,c[f],f,b))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(a){var b=E(this),c=q&&"[object String]"==m(this)?this.split(""):b,d=c.length>>>0;if("[object Function]"!=m(a))throw new TypeError(a+" is not a function");if(!d&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var e,f=0;if(arguments.length>=2)e=arguments[1];else for(;;){if(f in c){e=c[f++];break}if(++f>=d)throw new TypeError("reduce of empty array with no initial value")}for(;f<d;f++)f in c&&(e=a.call(void 0,e,c[f],f,b));return e}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(a){var b=E(this),c=q&&"[object String]"==m(this)?this.split(""):b,d=c.length>>>0;if("[object Function]"!=m(a))throw new TypeError(a+" is not a function");if(!d&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var e,f=d-1;if(arguments.length>=2)e=arguments[1];else for(;;){if(f in c){e=c[f--];break}if(--f<0)throw new TypeError("reduceRight of empty array with no initial value")}do f in this&&(e=a.call(void 0,e,c[f],f,b));while(f--);return e}),Array.prototype.indexOf&&[0,1].indexOf(1,2)==-1||(Array.prototype.indexOf=function(b){var c=q&&"[object String]"==m(this)?this.split(""):E(this),d=c.length>>>0;if(!d)return-1;var e=0;for(arguments.length>1&&(e=a(arguments[1])),e=e>=0?e:Math.max(0,d+e);e<d;e++)if(e in c&&c[e]===b)return e;return-1}),Array.prototype.lastIndexOf&&[0,1].lastIndexOf(0,-3)==-1||(Array.prototype.lastIndexOf=function(b){var c=q&&"[object String]"==m(this)?this.split(""):E(this),d=c.length>>>0;if(!d)return-1;var e=d-1;for(arguments.length>1&&(e=Math.min(e,a(arguments[1]))),e=e>=0?e:d-Math.abs(e);e>=0;e--)if(e in c&&b===c[e])return e;return-1}),!Object.keys){var r=!0,s=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],t=s.length;for(var u in{toString:null})r=!1;Object.keys=function F(a){if("object"!=typeof a&&"function"!=typeof a||null===a)throw new TypeError("Object.keys called on a non-object");var F=[];for(var b in a)n(a,b)&&F.push(b);if(r)for(var c=0,d=t;c<d;c++){var e=s[c];n(a,e)&&F.push(e)}return F}}var v=-621987552e5,w="-000001";Date.prototype.toISOString&&new Date(v).toISOString().indexOf(w)!==-1||(Date.prototype.toISOString=function(){var a,b,c,d,e;if(!isFinite(this))throw new RangeError("Date.prototype.toISOString called on non-finite value.");for(d=this.getUTCFullYear(),e=this.getUTCMonth(),d+=Math.floor(e/12),e=(e%12+12)%12,a=[e+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()],d=(d<0?"-":d>9999?"+":"")+("00000"+Math.abs(d)).slice(0<=d&&d<=9999?-4:-6),b=a.length;b--;)c=a[b],c<10&&(a[b]="0"+c);return d+"-"+a.slice(0,2).join("-")+"T"+a.slice(2).join(":")+"."+("000"+this.getUTCMilliseconds()).slice(-3)+"Z"});var x=!1;try{x=Date.prototype.toJSON&&null===new Date(NaN).toJSON()&&new Date(v).toJSON().indexOf(w)!==-1&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(y){}if(x||(Date.prototype.toJSON=function(a){var b,d=Object(this),e=c(d);if("number"==typeof e&&!isFinite(e))return null;if(b=d.toISOString,"function"!=typeof b)throw new TypeError("toISOString property is not callable");return b.call(d)}),!Date.parse,Date=function(a){function b(c,d,e,f,g,h,i){var j=arguments.length;if(this instanceof a){var k=1==j&&String(c)===c?new a(b.parse(c)):j>=7?new a(c,d,e,f,g,h,i):j>=6?new a(c,d,e,f,g,h):j>=5?new a(c,d,e,f,g):j>=4?new a(c,d,e,f):j>=3?new a(c,d,e):j>=2?new a(c,d):j>=1?new a(c):new a;return k.constructor=b,k}return a.apply(this,arguments)}function c(a,b){var c=b>1?1:0;return e[b]+Math.floor((a-1969+c)/4)-Math.floor((a-1901+c)/100)+Math.floor((a-1601+c)/400)+365*(a-1970)}var d=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:\\.(\\d{3}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),e=[0,31,59,90,120,151,181,212,243,273,304,334,365];for(var f in a)b[f]=a[f];return b.now=a.now,b.UTC=a.UTC,b.prototype=a.prototype,b.prototype.constructor=b,b.parse=function(b){var e=d.exec(b);if(e){var f,g=Number(e[1]),h=Number(e[2]||1)-1,i=Number(e[3]||1)-1,j=Number(e[4]||0),k=Number(e[5]||0),l=Number(e[6]||0),m=Number(e[7]||0),n=!e[4]||e[8]?0:Number(new a(1970,0)),o="-"===e[9]?1:-1,p=Number(e[10]||0),q=Number(e[11]||0);return j<(k>0||l>0||m>0?24:25)&&k<60&&l<60&&m<1e3&&h>-1&&h<12&&p<24&&q<60&&i>-1&&i<c(g,h+1)-c(g,h)&&(f=60*(24*(c(g,h)+i)+j+p*o),f=1e3*(60*(f+k+q*o)+l)+m+n,-864e13<=f&&f<=864e13)?f:NaN}return a.parse.apply(this,arguments)},b}(Date),Date.now||(Date.now=function(){return(new Date).getTime()}),"0".split(void 0,0).length){var z=String.prototype.split;String.prototype.split=function(a,b){return void 0===a&&0===b?[]:z.apply(this,arguments)}}if("".substr&&"b"!=="0b".substr(-1)){var A=String.prototype.substr;String.prototype.substr=function(a,b){return A.call(this,a<0&&(a=this.length+a)<0?0:a,b)}}var B="\t\n\x0B\f\r   ᠎             　\u2028\u2029\ufeff";if(!String.prototype.trim||B.trim()){B="["+B+"]";var C=new RegExp("^"+B+B+"*"),D=new RegExp(B+B+"*$");String.prototype.trim=function(){if(void 0===this||null===this)throw new TypeError("can't convert "+this+" to object");return String(this).replace(C,"").replace(D,"")}}var E=function(a){if(null==a)throw new TypeError("can't convert "+a+" to object");return Object(a)}}),crElNS="createElementNS"in document?document.createElementNS:function(a,b){return document.createElement(b)},"undefined"!=typeof document&&!("outerHTML"in crElNS("http://www.w3.org/1999/xhtml","_"))&&function(a){var b=crElNS("http://www.w3.org/1999/xhtml","_"),a=(a.HTMLElement||a.Element).prototype,c=new XMLSerializer,d=function(){var a;return document.xmlVersion?c.serializeToString(this):(b.appendChild(this.cloneNode(!1)),a=b.innerHTML.replace("><",">"+this.innerHTML+"<"),b.innerHTML="",a)},e=function(a){var c=this.parentNode;if(null===c)throw DOMException.code=DOMException.NOT_FOUND_ERR,DOMException;for(b.innerHTML=a;a=b.firstChild;)c.insertBefore(a,this);c.removeChild(this)};if(Object.defineProperty){d={get:d,set:e,enumerable:!0,configurable:!0};try{Object.defineProperty(a,"outerHTML",d)}catch(f){-2146823252===f.number&&(d.enumerable=!1,Object.defineProperty(a,"outerHTML",d))}}else Object.prototype.__defineGetter__&&Object.prototype.__defineSetter__&&(a.__defineGetter__("outerHTML",d),a.__defineSetter__("outerHTML",e))}(self);var app=app||{};$(function(){$("#releaseDate").datepicker(),new app.LibraryView});var app=app||{};app.Book=Backbone.Model.extend({defaults:{coverImage:"img/placeholder.png",title:"No title",author:"Unknown",releaseDate:"Unknown",keywords:"None"},parse:function(a){return a.id=a._id,a}}),define(["backbone"],function(a){var b=a.Model.extend({defaults:{price:35,photo:"http://www.placedog.com/100/100"}});return b});var app=app||{};app.Todo=Backbone.Model.extend({defaults:{title:"",completed:!1},toggle:function(){console.log("models/todo.js - inside app.Todo toggle()"),this.save({completed:!this.get("completed")})}}),TodoMVC.module("Todos",function(a,b,c,d,e,f){var g="todos-backbone-marionettejs";a.Todo=c.Model.extend({localStorage:new c.LocalStorage(g),defaults:{title:"",completed:!1,created:0},initialize:function(){this.isNew()&&this.set("created",Date.now())},toggle:function(){return this.set("completed",!this.isCompleted())},isCompleted:function(){return this.get("completed")}}),a.TodoList=c.Collection.extend({model:a.Todo,localStorage:new c.LocalStorage(g),getCompleted:function(){return this.filter(this._isCompleted)},getActive:function(){return this.reject(this._isCompleted)},comparator:function(a){return a.get("created")},_isCompleted:function(a){return a.isCompleted()}})});var app=app||{},Workspace=Backbone.Router.extend({routes:{"*filter":"setFilter"},setFilter:function(a){console.log("routers/router.js - inside app.ToDoRouter setFilter(param)"),a&&(a=a.trim()),app.TodoFilter=a||"",app.Todos.trigger("filter")}});app.TodoRouter=new Workspace,Backbone.history.start(),TodoMVC.module("TodoList",function(a,b,c,d,e,f){a.Router=d.AppRouter.extend({appRoutes:{"*filter":"filterItems"}}),a.Controller=function(){this.todoList=new b.Todos.TodoList},f.extend(a.Controller.prototype,{start:function(){this.showHeader(this.todoList),this.showFooter(this.todoList),this.showTodoList(this.todoList),b.bindTo(this.todoList,"reset add remove",this.toggleFooter,this),this.todoList.fetch()},showHeader:function(a){var c=new b.Layout.Header({collection:a});b.header.show(c)},showFooter:function(a){var c=new b.Layout.Footer({collection:a});b.footer.show(c)},showTodoList:function(c){b.main.show(new a.Views.ListView({collection:c}))},toggleFooter:function(){b.footer.$el.toggle(this.todoList.length)},filterItems:function(a){b.vent.trigger("todoList:filter",a.trim()||"")}}),a.addInitializer(function(){var b=new a.Controller;new a.Router({controller:b}),b.start()})}),require.config({paths:{jquery:"../vendor/jquery/jquery",underscore:"../vendor/underscore/underscore",backbone:"../vendor/backbone/backbone",lodash:"../vendor/lodash/lodash"},shim:{underscore:{exports:"_"},backbone:{deps:["underscore","jquery"],exports:"Backbone"},jquery:{exports:"$"}}});var items=[{title:"Macbook Air",price:799},{title:"Macbook Pro",price:999},{title:"The new iPad",price:399},{title:"Magic Mouse",price:50},{title:"Cinema Display",price:799}];require(["jquery","underscore","backbone","views/cartcollectionview"],function(a,b,c,d){a(function(){new d(items)})});var app=app||{},ENTER_KEY=13;$(function(){console.log("app.js - new app.AppView()"),new app.AppView}),require.config({baseUrl:".",paths:{underscore:"../vendor/underscore/underscore",backbone:"../vendor/backbone/backbone",jquery:"../vendor/jquery/jquery"},shim:{underscore:{exports:"_"},backbone:{deps:["underscore","jquery"],exports:"Backbone"},jquery:{exports:"$"}}});var TodoMVC=new Backbone.Marionette.Application;TodoMVC.addRegions({header:"#header",main:"#main",footer:"#footer"}),TodoMVC.on("initialize:after",function(){Backbone.history.start()});var app=app||{};app.BookView=Backbone.View.extend({tagName:"div",className:"bookContainer",template:_.template($("#bookTemplate").html()),render:function(){return this.$el.html(this.template(this.model.attributes)),this},events:{"click .delete":"deleteBook"},deleteBook:function(){this.model.destroy(),this.remove()}});var app=app||{};app.LibraryView=Backbone.View.extend({el:"#books",initialize:function(){this.collection=new app.Library,this.collection.fetch({reset:!0}),this.render(),this.listenTo(this.collection,"add",this.renderBook),this.listenTo(this.collection,"reset",this.render)},render:function(){this.collection.each(function(a){this.renderBook(a)},this)},renderBook:function(a){var b=new app.BookView({model:a});this.$el.append(b.render().el)},events:{"click #add":"addBook"},addBook:function(a){a.preventDefault();var b={};$("#addBook div").children("input").each(function(a,c){""!==$(c).val()&&("keywords"===c.id?(b[c.id]=[],_.each($(c).val().split(" "),function(a){b[c.id].push({keyword:a})})):"releaseDate"===c.id?b[c.id]=$("#releaseDate").datepicker("getDate").getTime():b[c.id]=$(c).val()),$(c).val("")}),this.collection.create(b)}}),define(["backbone","views/stockitemcollectionview","collections/stockcart"],function(a,b,c){var d=a.View.extend({el:"body",events:{"submit #add":"addItem","submit #filter":"filterItems","click #clear-filter":"clearFilter"},initialize:function(a){cartCollection=new c(a),this.itemView=new b(cartCollection)},addItem:function(a){a.preventDefault(),this.itemView.addItem()},filterItems:function(a){a.preventDefault(),this.itemView.filterByPrice()},clearFilter:function(a){a.preventDefault(),this.itemView.clearFilter()}});return d}),define(["backbone","models/stockitem","views/stockitemview"],function(a,b,c){var d=a.View.extend({el:"#yourcart",initialize:function(a){this.collection=a,this.render(),this.collection.on("reset",this.render,this)},render:function(){this.$el.html(""),this.collection.each(function(a){this.renderItem(a)},this)},renderItem:function(a){var b=new c({model:a});this.$el.append(b.render().el)},addItem:function(){var a={};$("#add").children("input[type='text']").each(function(b,c){a[c.id]=$(c).val()});var c=new b(a);this.collection.add(c),this.renderItem(c)},filterByPrice:function(){this.collection.reset(items,{silent:!0});var a=parseFloat($("#less-than").val(),10),b=_.filter(this.collection.models,function(b){return b.get("price")<a});this.collection.reset(b)},clearFilter:function(){$("#less-than").val(""),this.collection.reset(items)}});return d}),define(["backbone"],function(a){var b=a.View.extend({tagName:"div",className:"item-wrap",template:_.template($("#itemTemplate").html()),render:function(){return this.$el.html(this.template(this.model.toJSON())),this}});return b});var app=app||{};app.AppView=Backbone.View.extend({el:"#todoapp",statsTemplate:_.template($("#stats-template").html()),events:{"keypress #new-todo":"createOnEnter","click #clear-completed":"clearCompleted","click #toggle-all":"toggleAllComplete"},initialize:function(){console.log("views/app.js - inside app.AppView initialize()"),this.allCheckbox=this.$("#toggle-all")[0],this.$input=this.$("#new-todo"),this.$footer=this.$("#footer"),this.$main=this.$("#main"),this.listenTo(app.Todos,"add",this.addOne),this.listenTo(app.Todos,"reset",this.addAll),this.listenTo(app.Todos,"change:completed",this.filterOne),this.listenTo(app.Todos,"filter",this.filterAll),this.listenTo(app.Todos,"all",this.render),app.Todos.fetch()},render:function(){console.log("views/app.js - inside app.AppView render()");var a=app.Todos.completed().length,b=app.Todos.remaining().length;app.Todos.length?(this.$main.show(),this.$footer.show(),this.$footer.html(this.statsTemplate({completed:a,remaining:b})),this.$("#filters li a").removeClass("selected").filter('[href="#/'+(app.TodoFilter||"")+'"]').addClass("selected")):(this.$main.hide(),this.$footer.hide()),this.allCheckbox.checked=!b},addOne:function(a){console.log("views/app.js - inside app.AppView addOne(todo)");var b=new app.TodoView({model:a});$("#todo-list").append(b.render().el)},addAll:function(){console.log("views/app.js - inside app.AppView addAll()"),this.$("#todo-list").html(""),app.Todos.each(this.addOne,this)},filterOne:function(a){console.log("views/app.js - inside app.AppView filterOne(todo)"),a.trigger("visible")},filterAll:function(){console.log("views/app.js - inside app.AppView filterAll()"),app.Todos.each(this.filterOne,this)},newAttributes:function(){return console.log("views/app.js - inside app.AppView newAttributes()"),{title:this.$input.val().trim(),order:app.Todos.nextOrder(),completed:!1}},createOnEnter:function(a){console.log("views/app.js - inside app.AppView createOnEnter(event)"),a.which===ENTER_KEY&&this.$input.val().trim()&&(app.Todos.create(this.newAttributes()),this.$input.val(""))},clearCompleted:function(){return console.log("views/app.js - inside app.AppView clearCompleted()"),_.invoke(app.Todos.completed(),"destroy"),!1},toggleAllComplete:function(){console.log("views/app.js - inside app.AppView toggleAllComplete()");var a=this.allCheckbox.checked;app.Todos.each(function(b){b.save({completed:a})})}}),TodoMVC.module("Layout",function(a,b,c,d,e,f){a.Header=c.Marionette.ItemView.extend({template:"#template-header",ui:{input:"#new-todo"},events:{"keypress #new-todo":"onInputKeypress","blur #new-todo":"onTodoBlur"},onTodoBlur:function(){var a=this.ui.input.val().trim();this.createTodo(a)},onInputKeypress:function(a){var b=13,c=this.ui.input.val().trim();a.which===b&&c&&this.createTodo(c)},completeAdd:function(){this.ui.input.val("")},createTodo:function(a){""!==a.trim()&&(this.collection.create({title:a}),this.completeAdd())}}),a.Footer=c.Marionette.Layout.extend({template:"#template-footer",ui:{todoCount:"#todo-count .count",todoCountLabel:"#todo-count .label",clearCount:"#clear-completed .count",filters:"#filters a"},events:{"click #clear-completed":"onClearClick"},initialize:function(){this.bindTo(b.vent,"todoList: filter",this.updateFilterSelection,this),this.bindTo(this.collection,"all",this.updateCount,this)},onRender:function(){this.updateCount()},updateCount:function(){var a=this.collection.getActive().length,b=this.collection.getCompleted().length;this.ui.todoCount.html(a),this.ui.todoCountLabel.html(1===a?"item":"items"),this.ui.clearCount.html(0===b?"":"("+b+")")},updateFilterSelection:function(a){this.ui.filters.removeClass("selected").filter('[href="#'+a+'"]').addClass("selected")},onClearClick:function(){var a=this.collection.getCompleted();a.forEach(function(a){a.destroy()})}})}),TodoMVC.module("TodoList.Views",function(a,b,c,d,e,f){a.ItemView=d.ItemView.extend({tagName:"li",template:"#template-todoItemView",ui:{edit:".edit"},events:{"click .destroy":"destroy","dblclick label":"onEditClick","keypress .edit":"onEditKeypress","blur .edit":"onEditBlur","click .toggle":"toggle"},initialize:function(){this.bindTo(this.model,"change",this.render,this)},onRender:function(){this.$el.removeClass("active completed"),this.model.get("completed")?this.$el.addClass("completed"):this.$el.addClass("active")},destroy:function(){this.model.destroy()},toggle:function(){this.model.toggle().save()},onEditClick:function(){this.$el.addClass("editing"),this.ui.edit.focus()},updateTodo:function(){var a=this.ui.edit.val();return""===a?this.destroy():(this.setTodoText(a),void this.completeEdit())},onEditBlur:function(a){this.updateTodo()},onEditKeypress:function(a){var b=13;this.ui.edit.val().trim();a.which===b&&this.updateTodo()},setTodoText:function(a){""!==a.trim()&&this.model.set("title",a).save()},completeEdit:function(){this.$el.removeClass("editing")}}),a.ListView=c.Marionette.CompositeView.extend({template:"#template-todoListCompositeView",itemView:a.ItemView,itemViewContainer:"#todo-list",ui:{toggle:"#toggle-all"},events:{"click #toggle-all":"onToggleAllClick"},initialize:function(){this.bindTo(this.collection,"all",this.update,this)},onRender:function(){this.update()},update:function(){function a(a,b){return a&&b.get("completed")}var b=this.collection.reduce(a,!0);this.ui.toggle.prop("checked",b),this.$el.parent().toggle(!!this.collection.length)},onToggleAllClick:function(a){var b=a.currentTarget.checked;this.collection.each(function(a){a.save({completed:b})})}}),b.vent.on("todoList:filter",function(a){a=a||"all",e("#todoapp").attr("class","filter-"+a)})});var app=app||{};app.TodoView=Backbone.View.extend({tagName:"li",template:_.template($("#item-template").html()),events:{"click .toggle":"toggleCompleted","dblclick label":"edit","click .destroy":"clear","keypress .edit":"updateOnEnter","blur .edit":"close"},initialize:function(){console.log("views/todos.js - inside app.TodoView initialize()"),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.remove),this.listenTo(this.model,"visible",this.toggleVisible)},render:function(){return console.log("views/todos.js - inside app.TodoView render()"),this.$el.html(this.template(this.model.attributes)),this.$el.toggleClass("completed",this.model.get("completed")),this.toggleVisible(),this.$input=this.$(".edit"),this},toggleVisible:function(){console.log("views/todos.js - inside app.TodoView toggleVisible()"),this.$el.toggleClass("hidden",this.isHidden())},isHidden:function(){console.log("views/todos.js - inside app.TodoView isHidden()");var a=this.model.get("completed");return!a&&"completed"===app.TodoFilter||a&&"active"===app.TodoFilter},toggleCompleted:function(){console.log("views/todos.js - inside app.TodoView toggleCompleted()"),this.model.toggle()},edit:function(){console.log("views/todos.js - inside app.TodoView edit()"),this.$el.addClass("editing"),this.$input.focus()},close:function(){console.log("views/todos.js - inside app.TodoView close()");var a=this.$input.val().trim();a?this.model.save({title:a}):this.clear(),this.$el.removeClass("editing")},updateOnEnter:function(a){console.log("views/todos.js - inside app.TodoView updateOnEnter(e)"),a.which===ENTER_KEY&&this.close()},clear:function(){console.log("views/todos.js - inside app.TodoView clear()"),this.model.destroy()}});